<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>Material Web Components 테스트</title>

  <!-- Material Web Components 로드 -->
  <script type="module" src="https://unpkg.com/@material/web/all.js?module"></script>

  <style>
    body {
      font-family: 'Roboto', sans-serif;
      padding: 2rem;
    }
    mwc-textfield, mwc-button {
      margin-top: 1rem;
      display: block;
    }
  </style>
</head>
<body>

  <mwc-textfield id="nameInput" label="이름 입력" outlined></mwc-textfield>
  <mwc-button id="submitBtn" raised label="확인"></mwc-button>
  <p id="result"></p>

  <script>
    const input = document.getElementById('nameInput');
    const button = document.getElementById('submitBtn');
    const result = document.getElementById('result');

    // 버튼 클릭 시 입력값 표시
    button.addEventListener('click', () => {
      const name = input.value;  // MWC에서는 이렇게 접근 가능
      result.textContent = `안녕하세요, ${name}님!`;
    });

    // 테스트 코드
    async function runTest() {
      // MWC 컴포넌트 초기화 기다리기
      await customElements.whenDefined('mwc-textfield');
      await customElements.whenDefined('mwc-button');

      // 값 설정
      input.value = '우정이';

      // 내부 변경사항 적용 (필수!)
      input.dispatchEvent(new Event('input', { bubbles: true }));

      // 클릭 이벤트
      button.click();

      // 결과 검증
      const expected = '안녕하세요, 우정이님!';
      const actual = result.textContent;

      if (actual === expected) {
        console.log('✅ 테스트 통과');
      } else {
        console.error(`❌ 테스트 실패: 기대값 "${expected}", 실제값 "${actual}"`);
      }
    }

    window.addEventListener('DOMContentLoaded', () => {
      setTimeout(runTest, 500);  // 조금 기다렸다가 실행
    });
  </script>
</body>
</html>
