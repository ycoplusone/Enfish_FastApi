<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ë™ì  íƒ­ + ë‹«ê¸° ë²„íŠ¼</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    .nav-link .close-btn {
      margin-left: 8px;
      color: #999;
      font-weight: bold;
      cursor: pointer;
    }
    .nav-link .close-btn:hover {
      color: red;
    }
  </style>
</head>
<body class="p-4">

  <h4>ğŸ“Œ ë‹«ê¸° ë²„íŠ¼ì´ ìˆëŠ” ë™ì  Tabs ì˜ˆì œ</h4>

  <ul class="nav nav-tabs" id="myTab" role="tablist">
    <li class="nav-item" role="presentation">
      <button class="nav-link active" id="tab-home" data-bs-toggle="tab" data-bs-target="#content-home"
              type="button" role="tab" aria-controls="content-home" aria-selected="true">
        ê¸°ë³¸ íƒ­
      </button>
    </li>
  </ul>

  <div class="tab-content mt-3" id="myTabContent">
    <div class="tab-pane fade show active" id="content-home" role="tabpanel" aria-labelledby="tab-home">
      ê¸°ë³¸ íƒ­ ë‚´ìš©ì…ë‹ˆë‹¤.
    </div>
  </div>

  <button class="btn btn-success mt-3" onclick="addNewTab()">ìƒˆ íƒ­ ì¶”ê°€</button>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    let tabCount = 1;

    function addNewTab() {
      const tabId = `tab-${tabCount}`;
      const contentId = `content-${tabCount}`;

      // íƒ­ ë²„íŠ¼ ìƒì„±
      const tabItem = document.createElement('li');
      tabItem.classList.add('nav-item');
      tabItem.setAttribute('role', 'presentation');
      tabItem.innerHTML = `
        <button class="nav-link" id="${tabId}" data-bs-toggle="tab" data-bs-target="#${contentId}"
                type="button" role="tab" aria-controls="${contentId}" aria-selected="false">
          ìƒˆ íƒ­ ${tabCount}
          <span class="close-btn" onclick="closeTab(event, '${tabId}', '${contentId}')">&times;</span>
        </button>`;

      // íƒ­ ì½˜í…ì¸  ìƒì„±
      const tabPane = document.createElement('div');
      tabPane.classList.add('tab-pane', 'fade');
      tabPane.id = contentId;
      tabPane.setAttribute('role', 'tabpanel');
      tabPane.setAttribute('aria-labelledby', tabId);
      tabPane.innerHTML = `ìƒˆ íƒ­ ${tabCount}ì˜ ë‚´ìš©ì…ë‹ˆë‹¤.`;

      document.getElementById('myTab').appendChild(tabItem);
      document.getElementById('myTabContent').appendChild(tabPane);

      // ìƒˆ íƒ­ ìë™ í™œì„±í™”
      const newTab = new bootstrap.Tab(document.getElementById(tabId));
      newTab.show();

      tabCount++;
    }

    function closeTab(event, tabId, contentId) {
      event.stopPropagation();  // íƒ­ í´ë¦­ ë°©ì§€

      const tabButton = document.getElementById(tabId);
      const tabPane = document.getElementById(contentId);

      // í˜„ì¬ í™œì„± íƒ­ì¼ ê²½ìš° ì´ì „ íƒ­ìœ¼ë¡œ ì´ë™
      const isActive = tabButton.classList.contains('active');
      const previousTab = tabButton.closest('li').previousElementSibling?.querySelector('.nav-link');

      // ì‚­ì œ
      tabButton.closest('li').remove();
      if (tabPane) tabPane.remove();

      if (isActive && previousTab) {
        const previous = new bootstrap.Tab(previousTab);
        previous.show();
      }
    }
  </script>
</body>
</html>
